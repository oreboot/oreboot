trigger:
- master

schedules:
- cron: "0 0 * * *"
  displayName: Daily midnight (UTC) build
  branches:
    include:
    - master
  always: true

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: |
    curl https://sh.rustup.rs -sSf | sh
    rustup override set nightly
    cargo install cargo-binutils
    rustup component add llvm-tools-preview
    cargo install cargo-make
    cd src/mainboard/sifive/hifive
    RUST_TARGET_PATH=$(pwd) cargo make -p release
  displayName: 'Build for RISC-V'
